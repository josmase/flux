---
apiVersion: traefik.io/v1alpha1
kind: IngressRoute
metadata:
  name: home-assistant
spec:
  entryPoints:
    - websecure
  routes:
    - match: Host(`assistant.hejsan.xyz`)
      kind: Rule
      services:
        - kind: TraefikService
          name: home-assistant-external
  tls:
    secretName: hejsan-xyz-tls
---
apiVersion: traefik.io/v1alpha1
kind: TraefikService
metadata:
  name: home-assistant-external
spec:
  loadBalancer:
    servers:
      - url: "http://media.local.hejsan.xyz:8123"
